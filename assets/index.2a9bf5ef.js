(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();const style="";window.onload=e=>{const caasppView=document.getElementById("caaspp_view"),editView=document.getElementById("edit_view"),periodInputs=document.getElementsByClassName("pinput");caasppView.onclick=()=>handleCaasppLabel(),editView.onclick=()=>handleEditLabel();for(let n=0;n<periodInputs.length;n++)periodInputs.item(n).oninput=t=>setClassName(parseInt(t.target.parentElement.previousElementSibling.textContent.slice(-1)),t.target.value),periodInputs.item(n).onfocus=t=>{t.target.parentElement.animate({backgroundColor:"#313244"},{duration:100,fill:"forwards"}),t.target.parentElement.style.border="solid 1px #cba6f7"},periodInputs.item(n).addEventListener("focusout",t=>{t.target.parentElement.animate({backgroundColor:"#45475a"},{duration:100,fill:"forwards"}),t.target.parentElement.style.border="none"});let hasStorage=typeof Storage<"u",allSchedules=JSON.parse('{"A":[{"name":"1","start":"8:30","end":"9:20"},{"name":"2","start":"9:25","end":"10:20"},{"name":"3","start":"10:25","end":"11:15"},{"name":"Break","start":"11:15","end":"11:30"},{"name":"4","start":"11:35","end":"12:25"},{"name":"5","start":"12:30","end":"13:20"},{"name":"Lunch","start":"13:20","end":"13:50"},{"name":"6","start":"13:55","end":"14:45"},{"name":"7","start":"14:50","end":"15:40"}],"E":[{"name":"1","start":"8:30","end":"9:20"},{"name":"2","start":"9:25","end":"10:55"},{"name":"Break","start":"10:55","end":"11:10"},{"name":"Tutorial","start":"11:15","end":"12:00"},{"name":"4","start":"12:05","end":"13:35"},{"name":"Lunch","start":"13:35","end":"14:05"},{"name":"6","start":"14:10","end":"15:40"}],"O":[{"name":"1","start":"8:30","end":"9:20"},{"name":"3","start":"9:25","end":"10:55"},{"name":"Break","start":"10:55","end":"11:10"},{"name":"5","start":"11:15","end":"12:45"},{"name":"Lunch","start":"12:45","end":"13:15"},{"name":"7","start":"13:20","end":"14:50"}],"SA":[{"name":"1","start":"8:30","end":"9:25"},{"name":"3","start":"9:30","end":"10:45"},{"name":"Rally","start":"10:50","end":"11:25"},{"name":"Break","start":"11:25","end":"11:40"},{"name":"5","start":"11:45","end":"13:00"},{"name":"Lunch","start":"13:00","end":"13:30"},{"name":"7","start":"13:35","end":"14:50"}],"LA":[{"name":"1","start":"8:30","end":"9:15"},{"name":"3","start":"9:20","end":"10:30"},{"name":"Assembly","start":"10:35","end":"11:35"},{"name":"Break","start":"11:35","end":"11:50"},{"name":"5","start":"11:55","end":"13:05"},{"name":"Lunch","start":"13:05","end":"13:35"},{"name":"7","start":"13:40","end":"14:50"}],"NS":"none"}'),days=JSON.parse('["A","E","O","E","O"]'),latestIntervalID,overrideSchedules,nextItem,caasppScheduleIsEnabled=!1,editViewIsHidden=!0;hasStorage&&(caasppScheduleIsEnabled=eval(localStorage.getItem("showCaaspp"))),caasppScheduleIsEnabled==null&&(caasppScheduleIsEnabled=!1);function newDebugDate(){return new Date}function checkForChanges(){fetch("https://everythingischaos.com/schedule-data/overrides.json?="+Math.floor(Math.random()*1e3),{cache:"no-store"}).then(async n=>{const t=await n.json();JSON.stringify(t)!=JSON.stringify(overrideSchedules)&&(overrideSchedules=t,updateTable())},()=>{showAlert("Connection Lost")}),fetch("https://everythingischaos.com/schedule-data/schedules.json?="+Math.floor(Math.random()*1e3),{cache:"no-store"}).then(async n=>{const t=await n.json();JSON.stringify(t)!=JSON.stringify(allSchedules)&&(allSchedules=t,updateTable())},()=>{showAlert("Connection Lost")})}checkForChanges(),setInterval(checkForChanges,1e4);async function updateTable(){let n=new Date,t=allSchedules[days[n.getDay()-1]],r=!1;if(caasppScheduleIsEnabled){const l=`CAASPP_${n.getDate()}-${n.getMonth()+1}`;l in allSchedules&&(t=allSchedules[l],r=!0)}if(overrideSchedules&&!r){const l=`${n.getDate()}-${n.getMonth()+1}-${n.getFullYear()}`;overrideSchedules[l]&&(t=allSchedules[overrideSchedules[l]],console.log(t))}if(n.getDay()==0||n.getDay()==6||t=="none"){document.querySelector("#timer").textContent="No school today!";return}document.getElementById("periods").parentElement.animate({opacity:0},{duration:300,fill:"forwards"}).finished.then(()=>{document.querySelector("#periods").innerHTML="<tr><th>Period</th><th>Start</th><th>End</th></tr>";let l=[];latestIntervalID&&clearInterval(latestIntervalID);for(let s=0;s<t.length;s++){let a=t[s],o=timeStringToDate(a.start),u=timeStringToDate(a.end);l.push({time:o.getTime(),name:"Start of "+a.name}),l.push({time:u.getTime(),name:"End of "+a.name});let m=o.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),p=u.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),c;parseInt(a.name.charAt(0))!=null&&getClassName(a.name)?(console.log(parseInt(a.name.charAt(0))),console.log(a.name),c=a.name+": "+getClassName(a.name)):c=a.name;let d="<tr";a.name=="Break"||a.name=="Lunch"?d+=' class="break"':d+=" value="+a.name,d+=`>
      <td>${c}</td>
      <td>${m}</td>
      <td>${p}</td>
      </tr>`,document.getElementById("periods").innerHTML+=d}for(i=0;i<periodInputs.length;i++)periodInputs.item(i).value=getClassName(i+1)?getClassName(i+1):"";latestIntervalID=setInterval(renderTimer,3.33,l,n.getDay()),document.getElementById("periods").parentElement.animate({opacity:1},{duration:200,fill:"forwards"})})}function getClassName(n){if(hasStorage)return localStorage.getItem(n)?localStorage.getItem(n):void 0}function timeStringToDate(n){let t=newDebugDate(),r=n.split(":");return t.setHours(r[0],r[1],0),t}function findNext(n){let t=newDebugDate();for(let r=0;r<n.length;r++)if(n[r].time>=t.getTime())return n[r]}let prevSec=0,prevNext=0;function renderTimer(n,t){t!=newDebugDate().getDay()&&updateTable(),nextItem=findNext(n);let r=newDebugDate(),l=document.getElementById("timer");if(nextItem){let s=nextItem.time-r.getTime(),a=msToTime(s);document.visibilityState=="visible"&&(l.innerHTML=a.minutes+":"+a.seconds,prevNext!=nextItem&&(document.querySelector("#next").textContent="Until "+nextItem.name+(getClassName(nextItem.name.charAt(0))?": "+getClassName(nextItem.name.charAt(0)):""),prevNext=nextItem)),prevSec!=a.seconds&&(document.title=a.minutes+":"+a.seconds,prevSec=a.seconds)}else l.innerText="School's Out!",document.title="School's Out!"}function msToTime(n){var t=Math.floor(n/1e3%60),r=Math.floor(n/(1e3*60));return r=r<10?"0"+r:r,t=t<10?"0"+t:t,{minutes:r,seconds:t}}function handleCaasppLabel(){caasppScheduleIsEnabled=!caasppScheduleIsEnabled,console.log(caasppScheduleIsEnabled),caasppView.previousElementSibling.textContent=caasppScheduleIsEnabled?"Hide CAASPP Schedule":"Show CAASPP Schedule",caasppScheduleIsEnabled?caasppView.previousElementSibling.classList.add("selected"):caasppView.previousElementSibling.classList.remove("selected"),updateTable()}function handleEditLabel(){editViewIsHidden=!editViewIsHidden,console.log(editViewIsHidden),editView.previousElementSibling.textContent=editViewIsHidden?"Edit Schedule":"Close",editViewIsHidden?editView.previousElementSibling.classList.remove("selected"):editView.previousElementSibling.classList.add("selected"),document.querySelector("#edit").animate({opacity:editViewIsHidden?0:1,visibility:editViewIsHidden?"hidden":"visible"},{duration:100,fill:"forwards"})}function setClassName(n,t){if(hasStorage){const r=document.querySelector(`tr[value="${n}"] td:nth-child(1)`);t&&t!=""?(localStorage.setItem(n,t),r&&(r.textContent=n+": "+t)):(localStorage.removeItem(n),r&&(r.textContent=n))}}let alertHidden=!1;function showAlert(n){if(!alertHidden){const t=document.querySelector(".alert");document.querySelector("#alert-text").textContent=n,t.classList.contains("alert-visible")||t.classList.add("alert-visible")}}document.querySelector("#alert-close").addEventListener("click",()=>{document.querySelector(".alert").classList.remove("alert-visible"),alertHidden=!0})};
//# sourceMappingURL=index.2a9bf5ef.js.map
