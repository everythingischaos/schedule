(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}})();const style="";window.onload=()=>{const caasppView=document.getElementById("caaspp_view"),editView=document.getElementById("edit_view"),periodInputs=document.getElementsByClassName("pinput");caasppView.onclick=()=>handleCaasppLabel(),editView.onclick=()=>handleEditLabel();for(let t=0;t<periodInputs.length;t++)periodInputs.item(t).oninput=e=>setClassName(parseInt(e.target.parentElement.previousElementSibling.textContent.slice(-1)),e.target.value),periodInputs.item(t).onfocus=e=>{e.target.parentElement.animate({backgroundColor:"#313244"},{duration:100,fill:"forwards"}),e.target.parentElement.style.border="solid 1px #cba6f7"},periodInputs.item(t).addEventListener("focusout",e=>{e.target.parentElement.animate({backgroundColor:"#45475a"},{duration:100,fill:"forwards"}),e.target.parentElement.style.border=""});let hasStorage=typeof Storage<"u",allSchedules=JSON.parse('{"A":[{"name":"1","start":"8:30","end":"9:20"},{"name":"2","start":"9:25","end":"10:20"},{"name":"3","start":"10:25","end":"11:15"},{"name":"Break","start":"11:15","end":"11:30"},{"name":"4","start":"11:35","end":"12:25"},{"name":"5","start":"12:30","end":"13:20"},{"name":"Lunch","start":"13:20","end":"13:50"},{"name":"6","start":"13:55","end":"14:45"},{"name":"7","start":"14:50","end":"15:40"}],"E":[{"name":"1","start":"8:30","end":"9:20"},{"name":"2","start":"9:25","end":"10:55"},{"name":"Break","start":"10:55","end":"11:10"},{"name":"Tutorial","start":"11:15","end":"12:00"},{"name":"4","start":"12:05","end":"13:35"},{"name":"Lunch","start":"13:35","end":"14:05"},{"name":"6","start":"14:10","end":"15:40"}],"O":[{"name":"1","start":"8:30","end":"9:20"},{"name":"3","start":"9:25","end":"10:55"},{"name":"Break","start":"10:55","end":"11:10"},{"name":"5","start":"11:15","end":"12:45"},{"name":"Lunch","start":"12:45","end":"13:15"},{"name":"7","start":"13:20","end":"14:50"}],"SA":[{"name":"1","start":"8:30","end":"9:25"},{"name":"3","start":"9:30","end":"10:45"},{"name":"Rally","start":"10:50","end":"11:25"},{"name":"Break","start":"11:25","end":"11:40"},{"name":"5","start":"11:45","end":"13:00"},{"name":"Lunch","start":"13:00","end":"13:30"},{"name":"7","start":"13:35","end":"14:50"}],"LA":[{"name":"1","start":"8:30","end":"9:15"},{"name":"3","start":"9:20","end":"10:30"},{"name":"Assembly","start":"10:35","end":"11:35"},{"name":"Break","start":"11:35","end":"11:50"},{"name":"5","start":"11:55","end":"13:05"},{"name":"Lunch","start":"13:05","end":"13:35"},{"name":"7","start":"13:40","end":"14:50"}],"NS":"none"}'),days=JSON.parse('["A","E","O","E","O"]'),latestIntervalID,overrideSchedules,nextItem,caasppScheduleIsEnabled=!1,editViewIsHidden=!0;hasStorage&&eval(localStorage.getItem("showCaaspp"))&&handleCaasppLabel(),caasppScheduleIsEnabled==null&&(caasppScheduleIsEnabled=!1);function checkForChanges(){fetch("https://everythingischaos.com/schedule-data/overrides.json?="+Math.floor(Math.random()*1e3),{cache:"no-store"}).then(async t=>{const e=await t.json();JSON.stringify(e)!=JSON.stringify(overrideSchedules)&&(overrideSchedules=e,updateTable())},()=>{showAlert("Connection Lost")}),fetch("https://everythingischaos.com/schedule-data/schedules.json?="+Math.floor(Math.random()*1e3),{cache:"no-store"}).then(async t=>{const e=await t.json();JSON.stringify(e)!=JSON.stringify(allSchedules)&&(allSchedules=e,updateTable())},()=>{showAlert("Connection Lost")})}checkForChanges(),setInterval(checkForChanges,1e4);async function updateTable(){let t=new Date,e=allSchedules[days[t.getDay()-1]],s=!1;if(caasppScheduleIsEnabled){const r=`CAASPP_${t.getDate()}-${t.getMonth()+1}`;r in allSchedules&&(e=allSchedules[r],s=!0)}if(overrideSchedules&&!s){const r=`${t.getDate()}-${t.getMonth()+1}-${t.getFullYear()}`;overrideSchedules[r]&&(e=allSchedules[overrideSchedules[r]],console.log(e))}if(t.getDay()==0||t.getDay()==6||e=="none"){document.querySelector("#timer").textContent="No school today!";return}document.getElementById("periods").parentElement.animate({opacity:0},{duration:300,fill:"forwards"}).finished.then(()=>{document.querySelector("#periods").innerHTML="<tr><th>Period</th><th>Start</th><th>End</th></tr>";let r=[];latestIntervalID&&clearInterval(latestIntervalID);for(let n=0;n<e.length;n++){let a=e[n],l=timeStringToDate(a.start),d=timeStringToDate(a.end);r.push({time:l.getTime(),name:"Start of "+a.name}),r.push({time:d.getTime(),name:"End of "+a.name});let c=l.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),u=d.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),o;parseInt(a.name.charAt(0))!=null&&getClassName(a.name)?(console.log(parseInt(a.name.charAt(0))),console.log(a.name),o=a.name+": "+getClassName(a.name)):o=a.name;let i="<tr";a.name=="Break"||a.name=="Lunch"?i+=' class="break"':i+=" value="+a.name,i+=`>
      <td>${o}</td>
      <td>${c}</td>
      <td>${u}</td>
      </tr>`,document.getElementById("periods").innerHTML+=i}for(let n=0;n<periodInputs.length;n++)periodInputs.item(n).value=getClassName(n+1)?getClassName(n+1):"";latestIntervalID=setInterval(renderTimer,3.33,r,t.getDay()),document.getElementById("periods").parentElement.animate({opacity:1},{duration:200,fill:"forwards"})})}function getClassName(t){if(hasStorage)return localStorage.getItem(t)?localStorage.getItem(t):void 0}function timeStringToDate(t){let e=new Date,s=t.split(":");return e.setHours(s[0],s[1],0),e}function findNext(t){for(let e=0;e<t.length;e++)if(t[e].time>=new Date().getTime())return t[e]}let prevSec=0,prevNext=0;function renderTimer(t,e){e!=new Date().getDay()&&updateTable(),nextItem=findNext(t);let s=document.getElementById("timer");if(nextItem){let r=nextItem.time-new Date().getTime(),n=msToTime(r);document.visibilityState=="visible"&&(s.innerHTML=n.minutes+":"+n.seconds+"."+n.millisconds,prevNext!=nextItem&&(document.querySelector("#next").textContent="Until "+nextItem.name+(getClassName(nextItem.name.charAt(0))?": "+getClassName(nextItem.name.charAt(0)):""),prevNext=nextItem)),prevSec!=n.seconds&&(document.title=n.minutes+":"+n.seconds,prevSec=n.seconds)}else s.innerText="School's Out!",document.title="School's Out!"}function msToTime(t){var e=Math.floor(t%1e3),s=Math.floor(t/1e3%60),r=Math.floor(t/(1e3*60));return r=r<10?"0"+r:r,s=s<10?"0"+s:s,e=e<100?e<10?"00"+e:"0"+e:e,{minutes:r,seconds:s,millisconds:e}}function handleCaasppLabel(){caasppScheduleIsEnabled=!caasppScheduleIsEnabled,localStorage.setItem("showCaaspp",caasppScheduleIsEnabled),console.log(caasppScheduleIsEnabled),caasppView.previousElementSibling.textContent=caasppScheduleIsEnabled?"Hide CAASPP Schedule":"Show CAASPP Schedule",caasppScheduleIsEnabled?caasppView.previousElementSibling.classList.add("selected"):caasppView.previousElementSibling.classList.remove("selected"),updateTable()}function handleEditLabel(){editViewIsHidden=!editViewIsHidden,console.log(editViewIsHidden),editView.previousElementSibling.textContent=editViewIsHidden?"Edit Schedule":"Close",editViewIsHidden?editView.previousElementSibling.classList.remove("selected"):editView.previousElementSibling.classList.add("selected");const t=document.querySelector("#edit");t.animate({opacity:editViewIsHidden?0:1},{duration:100,fill:"forwards"}),t.style.visibility=editViewIsHidden?"hidden":"visible"}function setClassName(t,e){if(hasStorage){const s=document.querySelector(`tr[value="${t}"] td:nth-child(1)`);e&&e!=""?(localStorage.setItem(t,e),s&&(s.textContent=t+": "+e)):(localStorage.removeItem(t),s&&(s.textContent=t))}}let alertHidden=!1;function showAlert(t){if(!alertHidden){const e=document.querySelector(".alert");document.querySelector("#alert-text").textContent=t,e.classList.contains("alert-visible")||e.classList.add("alert-visible")}}document.querySelector("#alert-close").addEventListener("click",()=>{document.querySelector(".alert").classList.remove("alert-visible"),alertHidden=!0})};
//# sourceMappingURL=index.45b06726.js.map
