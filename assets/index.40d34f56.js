(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function o(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerpolicy&&(l.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?l.credentials="include":n.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(n){if(n.ep)return;n.ep=!0;const l=o(n);fetch(n.href,l)}})();const style="";window.onload=()=>{const themeSwitch=document.getElementById("theme_switch"),colorView=document.getElementById("color_view"),caasppView=document.getElementById("caaspp_view"),editView=document.getElementById("edit_view"),periodInputs=document.getElementsByClassName("pinput"),colorViewLabel=document.getElementById("color_view_label"),colorMenu=document.getElementById("color_menu"),lightDarkLabel=document.getElementById("light_dark_label"),lightDarkIcons=lightDarkLabel.children;colorView.onclick=e=>handleColorViewClick(),themeSwitch.onclick=()=>handleThemeClick(),colorViewLabel.onmouseenter=()=>{colorViewLabel.classList.contains("selected")||rotateChildren(colorViewLabel,-15)},colorViewLabel.onmouseleave=()=>{colorViewLabel.classList.contains("selected")||rotateChildren(colorViewLabel,15)},lightDarkLabel.onmouseenter=()=>rotateChildren(lightDarkLabel,-15),lightDarkLabel.onmouseleave=()=>rotateChildren(lightDarkLabel,15),caasppView.onclick=()=>handleCaasppClick(),editView.onclick=()=>handleEditClick();for(let e=0;e<periodInputs.length;e++)periodInputs.item(e).oninput=t=>setClassName(parseInt(t.target.parentElement.previousElementSibling.textContent.slice(-1)),t.target.value),periodInputs.item(e).onfocus=t=>{t.target.parentElement.animate({backgroundColor:document.documentElement.style.getPropertyValue("--surface0-hex")},{duration:100,fill:"forwards"}),t.target.parentElement.style.border=`solid 1px ${document.documentElement.style.getPropertyValue("--accent-hex")}`},periodInputs.item(e).addEventListener("focusout",t=>{t.target.parentElement.animate({backgroundColor:document.documentElement.style.getPropertyValue("--surface1-hex")},{duration:100,fill:"forwards"}),t.target.parentElement.style.border=""});let hasStorage=typeof Storage<"u",allSchedules=JSON.parse('{"A":[{"name":"1","start":"8:30","end":"9:20"},{"name":"2","start":"9:25","end":"10:20"},{"name":"3","start":"10:25","end":"11:15"},{"name":"Break","start":"11:15","end":"11:30"},{"name":"4","start":"11:35","end":"12:25"},{"name":"5","start":"12:30","end":"13:20"},{"name":"Lunch","start":"13:20","end":"13:50"},{"name":"6","start":"13:55","end":"14:45"},{"name":"7","start":"14:50","end":"15:40"}],"E":[{"name":"1","start":"8:30","end":"9:20"},{"name":"2","start":"9:25","end":"10:55"},{"name":"Break","start":"10:55","end":"11:10"},{"name":"Tutorial","start":"11:15","end":"12:00"},{"name":"4","start":"12:05","end":"13:35"},{"name":"Lunch","start":"13:35","end":"14:05"},{"name":"6","start":"14:10","end":"15:40"}],"O":[{"name":"1","start":"8:30","end":"9:20"},{"name":"3","start":"9:25","end":"10:55"},{"name":"Break","start":"10:55","end":"11:10"},{"name":"5","start":"11:15","end":"12:45"},{"name":"Lunch","start":"12:45","end":"13:15"},{"name":"7","start":"13:20","end":"14:50"}],"SA":[{"name":"1","start":"8:30","end":"9:25"},{"name":"3","start":"9:30","end":"10:45"},{"name":"Rally","start":"10:50","end":"11:25"},{"name":"Break","start":"11:25","end":"11:40"},{"name":"5","start":"11:45","end":"13:00"},{"name":"Lunch","start":"13:00","end":"13:30"},{"name":"7","start":"13:35","end":"14:50"}],"LA":[{"name":"1","start":"8:30","end":"9:15"},{"name":"3","start":"9:20","end":"10:30"},{"name":"Assembly","start":"10:35","end":"11:35"},{"name":"Break","start":"11:35","end":"11:50"},{"name":"5","start":"11:55","end":"13:05"},{"name":"Lunch","start":"13:05","end":"13:35"},{"name":"7","start":"13:40","end":"14:50"}],"NS":"none"}'),days=JSON.parse('["A","E","O","E","O"]'),latestIntervalID,overrideSchedules,nextItem,palette,accentColors=[],recursiveAnimationInProgress=!1,colorViewIsHidden=!0,editViewIsHidden=!0,caasppScheduleIsEnabled=!1;hasStorage&&localStorage.getItem("showCaaspp")!=null&&eval(localStorage.getItem("showCaaspp"))&&handleCaasppClick();let accentColor="mauve";hasStorage&&localStorage.getItem("accentColor")!=null&&(accentColor=localStorage.getItem("accentColor"));let themeIsDark=!0;hasStorage&&localStorage.getItem("themeIsDark")!=null&&(eval(localStorage.getItem("themeIsDark"))||handleThemeClick());function loadTheme(){if(palette==null)return;const e=palette[themeIsDark?"mocha":"frappe"].colors;document.documentElement.style.setProperty("--text-hex",e.text.hex),document.documentElement.style.setProperty("--subtext1-hex",e.subtext1.hex),document.documentElement.style.setProperty("--subtext0-hex",e.subtext0.hex),document.documentElement.style.setProperty("--overlay2-hex",e.overlay2.hex),document.documentElement.style.setProperty("--overlay1-hex",e.overlay1.hex),document.documentElement.style.setProperty("--overlay0-hex",e.overlay0.hex),document.documentElement.style.setProperty("--surface2-hex",e.surface2.hex),document.documentElement.style.setProperty("--surface1-hex",e.surface1.hex),document.documentElement.style.setProperty("--surface0-hex",e.surface0.hex),document.documentElement.style.setProperty("--base-hex",e.base.hex),document.documentElement.style.setProperty("--mantle-hex",e.mantle.hex),document.documentElement.style.setProperty("--crust-hex",e.crust.hex),document.documentElement.style.setProperty("--accent-hex",e[accentColor].hex),document.documentElement.style.setProperty("--accent-h",e[accentColor].hsl.h),document.documentElement.style.setProperty("--accent-s",`${e[accentColor].hsl.s*100}%`),document.documentElement.style.setProperty("--accent-l",`${e[accentColor].hsl.l*100}%`)}function populateColorMenu(){if(palette==null)return;colorMenu.innerHTML="",accentColors=[];const e=palette[themeIsDark?"mocha":"frappe"].colors;for(var t in e){if(!e[t].accent)continue;accentColors.push(t);let o=document.createElement("div");o.classList.add("color_option_container"),t==accentColor&&o.classList.add("selected");let a=document.createElement("label");a.classList.add("color_option_label"),a.id=`${t}_label`,a.htmlFor=t,a.style.backgroundColor=`var(--${t}-hex)`;let n=document.createElement("input");n.id=t,n.type="button",n.hidden=!0,n.onclick=l=>handleColorOptionClick(l),o.appendChild(a),o.appendChild(n),document.documentElement.style.setProperty(`--${t}-hex`,e[t].hex),colorMenu.appendChild(o)}}function receivePalette(){fetch("https://raw.githubusercontent.com/catppuccin/palette/main/palette.json").then(async e=>{palette=await e.json(),loadTheme(),populateColorMenu()},()=>{})}function checkForChanges(){fetch("https://everythingischaos.com/schedule-data/overrides.json?="+Math.floor(Math.random()*1e3),{cache:"no-store"}).then(async e=>{const t=await e.json();JSON.stringify(t)!=JSON.stringify(overrideSchedules)&&(overrideSchedules=t,updateTable())},()=>{showAlert("Connection Lost")}),fetch("https://everythingischaos.com/schedule-data/schedules.json?="+Math.floor(Math.random()*1e3),{cache:"no-store"}).then(async e=>{const t=await e.json();JSON.stringify(t)!=JSON.stringify(allSchedules)&&(allSchedules=t,updateTable())},()=>{showAlert("Connection Lost")})}receivePalette(),checkForChanges(),setInterval(checkForChanges,1e4);async function updateTable(){let e=new Date,t=allSchedules[days[e.getDay()-1]],o=!1;if(caasppScheduleIsEnabled){const a=`CAASPP_${e.getDate()}-${e.getMonth()+1}`;a in allSchedules&&(t=allSchedules[a],o=!0)}if(overrideSchedules&&!o){const a=`${e.getDate()}-${e.getMonth()+1}-${e.getFullYear()}`;overrideSchedules[a]&&(t=allSchedules[overrideSchedules[a]],console.log(t))}if(e.getDay()==0||e.getDay()==6||t=="none"){document.querySelector("#timer").textContent="No school today!";return}document.getElementById("periods").parentElement.animate({opacity:0},{duration:300,fill:"forwards"}).finished.then(()=>{document.querySelector("#periods").innerHTML="<tr><th>Period</th><th>Start</th><th>End</th></tr>";let a=[];latestIntervalID&&clearInterval(latestIntervalID);for(let n=0;n<t.length;n++){let l=t[n],r=timeStringToDate(l.start),i=timeStringToDate(l.end);a.push({time:r.getTime(),name:"Start of "+l.name}),a.push({time:i.getTime(),name:"End of "+l.name});let d=r.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),m=i.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),c;parseInt(l.name.charAt(0))!=null&&getClassName(l.name)?(console.log(parseInt(l.name.charAt(0))),console.log(l.name),c=l.name+": "+getClassName(l.name)):c=l.name;let s="<tr";l.name=="Break"||l.name=="Lunch"?s+=' class="break"':s+=" value="+l.name,s+=`>
      <td>${c}</td>
      <td>${d}</td>
      <td>${m}</td>
      </tr>`,document.getElementById("periods").innerHTML+=s}for(let n=0;n<periodInputs.length;n++)periodInputs.item(n).value=getClassName(n+1)?getClassName(n+1):"";latestIntervalID=setInterval(renderTimer,3.33,a,e.getDay()),document.getElementById("periods").parentElement.animate({opacity:1},{duration:200,fill:"forwards"})})}function getClassName(e){if(hasStorage)return localStorage.getItem(e)?localStorage.getItem(e):void 0}function timeStringToDate(e){let t=new Date,o=e.split(":");return t.setHours(o[0],o[1],0),t}function findNext(e){for(let t=0;t<e.length;t++)if(e[t].time>=new Date().getTime())return e[t]}let prevSec=0,prevNext=0;function renderTimer(e,t){t!=new Date().getDay()&&updateTable(),nextItem=findNext(e);let o=document.getElementById("timer");if(nextItem){let a=nextItem.time-new Date().getTime(),n=msToTime(a);document.visibilityState=="visible"&&(o.innerHTML=n.minutes+":"+n.seconds+"."+n.millisconds,prevNext!=nextItem&&(document.querySelector("#next").textContent="Until "+nextItem.name+(getClassName(nextItem.name.charAt(0))?": "+getClassName(nextItem.name.charAt(0)):""),prevNext=nextItem)),prevSec!=n.seconds&&(document.title=n.minutes+":"+n.seconds,prevSec=n.seconds)}else o.innerText="School's Out!",document.title="School's Out!"}function msToTime(e){var t=Math.floor(e%1e3),o=Math.floor(e/1e3%60),a=Math.floor(e/(1e3*60));return a=a<10?"0"+a:a,o=o<10?"0"+o:o,t=t<100?t<10?"00"+t:"0"+t:t,{minutes:a,seconds:o,millisconds:t}}function handleColorViewClick(){recursiveAnimationInProgress||(colorViewIsHidden=!colorViewIsHidden,colorMenu.style.height=colorViewIsHidden?"0":`${accentColors.length*2.3+accentColors.length*.3}rem`,colorMenu.style.padding=colorViewIsHidden?"0":"0.3rem",colorViewIsHidden?colorViewLabel.classList.remove("selected"):colorViewLabel.classList.add("selected"),document.documentElement.style.setProperty("--current-easing",colorViewIsHidden?"cubic-bezier(0.36, 0, 0.66, -0.56)":"cubic-bezier(0.34, 1.56, 0.64, 1)"),recursiveAnimateOpacity(document.getElementsByClassName("color_option_container"),0,500,!!colorViewIsHidden,colorViewIsHidden?"0%":"100%"),rotateChildren(colorViewLabel,360))}function handleColorOptionClick(e){e.target.id==accentColor||!editViewIsHidden||recursiveAnimationInProgress||(document.getElementById(`${accentColor}_label`).parentElement.classList.remove("selected"),accentColor=e.target.id,localStorage.setItem("accentColor",accentColor),e.target.parentElement.classList.add("selected"),loadTheme())}function recursiveAnimateOpacity(e,t,o,a,n){if(recursiveAnimationInProgress=!0,t>=e.length||t<0){recursiveAnimationInProgress=!1;return}e.item(a?e.length-(t+1):t).style.opacity=n,o/e.length*funnyEaseOutBackBecauseWhyNot((t+1)/e.length),setTimeout(()=>{recursiveAnimateOpacity(e,t+1,o,a,n)},.5*o/e.length)}function handleThemeClick(){themeIsDark=!themeIsDark,localStorage.setItem("themeIsDark",themeIsDark),lightDarkIcons.item(0).style.setProperty("opacity",themeIsDark?"100%":"0%"),lightDarkIcons.item(1).style.setProperty("opacity",themeIsDark?"0%":"100%"),rotateChildren(lightDarkLabel,360),loadTheme()}function handleCaasppClick(){caasppScheduleIsEnabled=!caasppScheduleIsEnabled,localStorage.setItem("showCaaspp",caasppScheduleIsEnabled),caasppView.previousElementSibling.textContent=caasppScheduleIsEnabled?"Hide CAASPP Schedule":"Show CAASPP Schedule",caasppScheduleIsEnabled?caasppView.previousElementSibling.classList.add("selected"):caasppView.previousElementSibling.classList.remove("selected"),updateTable()}function handleEditClick(){editViewIsHidden=!editViewIsHidden,editView.previousElementSibling.textContent=editViewIsHidden?"Edit Schedule":"Close",editViewIsHidden?editView.previousElementSibling.classList.remove("selected"):editView.previousElementSibling.classList.add("selected");const e=document.querySelector("#edit");e.animate({opacity:editViewIsHidden?0:1},{duration:100,fill:"forwards"}),e.style.visibility=editViewIsHidden?"hidden":"visible"}function rotateChildren(e,t){for(let o=0;o<e.children.length;o++){const a=e.children.item(o).style.getPropertyValue("transform");let n=0;a.includes("rotate")&&(n+=parseInt(a.substring(a.lastIndexOf("rotate")+7,a.lastIndexOf("deg)")))),e.children.item(0).style.setProperty("transform",`rotate(${n+t}deg)`),e.children.item(o).style.setProperty("-webkit-transform",`rotate(${n+t}deg)`)}}function funnyEaseOutBackBecauseWhyNot(e){return 1+2.70158*Math.pow(e-1,3)+1.70158*Math.pow(e-1,2)}function setClassName(e,t){if(hasStorage){const o=document.querySelector(`tr[value="${e}"] td:nth-child(1)`);t&&t!=""?(localStorage.setItem(e,t),o&&(o.textContent=e+": "+t)):(localStorage.removeItem(e),o&&(o.textContent=e))}}function showAlert(e){{const t=document.querySelector(".alert");document.querySelector("#alert-text").textContent=e,t.classList.contains("alert-visible")||t.classList.add("alert-visible")}}};
//# sourceMappingURL=index.40d34f56.js.map
