let hasStorage=!1;hasStorage="undefined"!=typeof Storage,$.ajaxSetup({cache:!1});let latestIntervalID,override,defaultAllSchedules=JSON.parse('[[{"name":"1","start":"8:30","end":"9:15"},{"name":"2","start":"9:20","end":"10:10"},{"name":"3","start":"10:15","end":"11:05"},{"name":"Break","start":"11:05","end":"11:20"},{"name":"4","start":"11:25","end":"12:15"},{"name":"5","start":"12:20","end":"13:10"},{"name":"Lunch","start":"13:10","end":"13:40"},{"name":"6","start":"13:45","end":"14:35"},{"name":"7","start":"14:40","end":"15:30"}],[{"name":"1","start":"8:30","end":"9:36"},{"name":"3","start":"9:41","end":"11:18"},{"name":"Break","start":"11:18","end":"11:33"},{"name":"5","start":"11:38","end":"13:15"},{"name":"Lunch","start":"13:15","end":"13:48"},{"name":"7","start":"13:53","end":"15:30"}],[{"name":"2","start":"8:30","end":"10:07"},{"name":"Tutorial","start":"10:12","end":"11:18"},{"name":"Break","start":"11:18","end":"11:33"},{"name":"4","start":"11:38","end":"13:15"},{"name":"Lunch","start":"13:15","end":"13:48"},{"name":"6","start":"13:53","end":"15:30"}],[{"name":"1","start":"8:30","end":"9:36"},{"name":"3","start":"9:41","end":"11:18"},{"name":"Break","start":"11:18","end":"11:33"},{"name":"5","start":"11:38","end":"13:15"},{"name":"Lunch","start":"13:15","end":"13:48"},{"name":"7","start":"13:53","end":"15:30"}],[{"name":"1","start":"8:30","end":"9:36"},{"name":"2","start":"9:41","end":"11:18"},{"name":"Break","start":"11:18","end":"11:33"},{"name":"4","start":"11:38","end":"13:15"},{"name":"Lunch","start":"13:15","end":"13:48"},{"name":"6","start":"13:53","end":"15:30"}]]');function newDebugDate(){let e=new Date;return e.setTime(e.getTime()+0),e}function generateSchedule(e){let t,n=newDebugDate().getDay();if(override){const a=newDebugDate(),r=`${a.getDate()}-${a.getMonth()+1}-${a.getFullYear()}`;t=override[r]?override[r]:e[n-1]}else t=e[n-1];if(0!=n&&6!=n||override){$("#periods").html("<tr><th>Period</th><th>Start</th><th>End</th></tr>");let e=[];latestIntervalID&&clearInterval(latestIntervalID);for(let n=0;n<t.length;n++){currentP=t[n];let a=timeStringToDate(currentP.start),r=timeStringToDate(currentP.end);e.push({time:a.getTime(),name:"Start of "+currentP.name}),e.push({time:r.getTime(),name:"End of "+currentP.name});let s,l=a.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),m=r.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0});s="Break"!=currentP.name&&"Lunch"!=currentP.name&&!currentP.name.includes("walkout")&&getClassName(currentP.name)?currentP.name+": "+getClassName(currentP.name):currentP.name;let i="<tr";currentP.name.includes("walkout")?i+=' class="walkout"':"Break"==currentP.name||"Lunch"==currentP.name?i+=' class="break"':i+=" value="+currentP.name,i+=`>\n      <td>${s}</td>\n      <td>${l}</td>\n      <td>${currentP.name.includes("walkout")?"~":""}${m}</td>\n    </tr>`,document.getElementById("periods").innerHTML+=i}$(".pinput").each((function(e){$(this).val(getClassName(String(e+1)))})),latestIntervalID=setInterval(renderTimer,1,e,n)}else $("#timer").text("No school today!")}function getClassName(e){return hasStorage&&localStorage.getItem(e)?localStorage.getItem(e):void 0}function timeStringToDate(e){let t=newDebugDate(),n=e.split(":");return t.setHours(n[0],n[1],0),t}function findNext(e){let t=newDebugDate();for(let n=0;n<e.length;n++)if(e[n].time>=t.getTime())return e[n]}fetch("https://gist.githubusercontent.com/piguyisme/e652e0a5009f17efde347c390767d069/raw/schedule.json").then((async e=>{const t=await e.json();t!=defaultAllSchedules&&(defaultAllSchedules=t,generateSchedule(defaultAllSchedules))})),fetch("https://gist.githubusercontent.com/piguyisme/db88af35c569b7b5a8aff60c679f527c/raw/overrides.json").then((async e=>{override=await e.json(),generateSchedule(defaultAllSchedules)})),$(document).ready((()=>{generateSchedule(defaultAllSchedules)}));let prevSec=0,prevNext=0;function renderTimer(e,t){t!=newDebugDate().getDay()&&generateSchedule(defaultAllSchedules),nextTime=findNext(e);let n=newDebugDate(),a=document.getElementById("timer");if(nextTime){let e=msToTime(nextTime.time-n.getTime());"visible"==document.visibilityState&&(a.innerHTML=e.minutes+":"+e.seconds+"."+e.milliseconds,prevNext!=nextTime&&($("#next").text("Until "+nextTime.name+(getClassName(nextTime.name.slice(-1))?": "+getClassName(nextTime.name.slice(-1)):"")),prevNext=nextTime)),prevSec!=e.seconds&&(document.title=e.minutes+":"+e.seconds,prevSec=e.seconds)}else a.innerText="School's Out!",document.title="School's Out!"}function msToTime(e){var t=Math.floor(e%1e3),n=Math.floor(e/1e3%60),a=Math.floor(e/6e4);return{minutes:a=a<10?"0"+a:a,seconds:n=n<10?"0"+n:n,milliseconds:t=t<100?t<10?"00"+t:"0"+t:t}}function setClassName(e,t){hasStorage&&(t&&""!=t?(localStorage.setItem(e,t),$(`tr[value=${e}] td:nth-child(1)`).text(e+": "+t)):(localStorage.removeItem(e),$(`tr[value=${e}] td:nth-child(1)`).text(e)))}$("#shownaming").click((()=>{$("#naming").stop(),$("#naming").slideToggle()})),$(".pinput").on("input",(function(){let e=$(this);setClassName(e.attr("id")[1],e.val())}));